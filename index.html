<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Submit Name & Age</title>
  <style>
    body{font-family:system-ui;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#f0f6ff}
    .card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.08);width:320px}
    label{display:block;margin-top:10px;font-weight:600}
    input{width:100%;padding:8px;margin-top:6px;border-radius:8px;border:1px solid #e6eef7}
    button{margin-top:16px;width:100%;padding:10px;border-radius:8px;border:0;font-weight:700;cursor:pointer;background:linear-gradient(90deg,#4f9bff,#6be1ff)}
    .msg{margin-top:10px;font-size:13px;min-height:18px}
  </style>
</head>
<body>
  <div class="card">
    <h3>Enter details</h3>
    <form id="dataForm" method="post" action="https://script.google.com/macros/s/AKfycbyQg-V1fGewYOK_fIYD7M8IqYZql3lFlRdaFP7AitolrAiezHpE4J19FczvGgE4Z34l/exec">
      <label for="name">Name</label>
      <input id="name" name="name" type="text" required>
      <label for="age">Age</label>
      <input id="age" name="age" type="number" min="0" required>
      <button type="submit">Send</button>
      <div class="msg" id="msg"></div>
    </form>
  </div>

  <script>
    (function(){
      const form = document.getElementById('dataForm');
      const msg = document.getElementById('msg');

      form.addEventListener('submit', function(e){
        e.preventDefault();
        msg.textContent = 'Sending...';
        const name = document.getElementById('name').value.trim();
        const age = document.getElementById('age').value.trim();
        if (!name || !age) { msg.textContent = 'Please fill both fields.'; return; }

        fetch(form.action, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name: name, age: age }),
          mode: 'cors'
        })
        .then(r => r.json().catch(()=>({})))
        .then(data => {
          if (data && data.status === 'success') {
            msg.textContent = 'Saved! Thank you.';
            form.reset();
          } else if (data && data.status === 'error') {
            msg.textContent = 'Error: ' + (data.message || 'unknown');
          } else {
            msg.textContent = 'Saved (no JSON).';
            form.reset();
          }
        })
        .catch(err => {
          console.warn('Fetch failed, fallback to form submit', err);
          msg.textContent = 'Network issue â€” trying fallback submit...';
          form.submit(); // fallback direct post
        });
      });
    })();
  </script>
</body>
</html>
